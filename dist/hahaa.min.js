"use strict";!function(t){function e(){return Promise.all([new Promise(n),new Promise(a)])}function n(e,n){t.get("https://twitchemotes.com/api_cache/v2/global.json",function(t){e(t)})}function a(e,n){t.get("https://api.betterttv.net/2/emotes/",function(t,n){e(t)})}function o(){console.log("Could not get emote list, you will only have Kappas Kappa"),window.KappaJS={twitch:{meta:{generated_at:"2016-09-10T19:40:04Z"},template:{small:"https://static-cdn.jtvnw.net/emoticons/v1/{image_id}/1.0",medium:"https://static-cdn.jtvnw.net/emoticons/v1/{image_id}/2.0",large:"https://static-cdn.jtvnw.net/emoticons/v1/{image_id}/3.0"},emotes:{Kappa:{description:"This is the face of Josh, a former Justin.tv employee. Kappa is generally used to indicate sarcasm or trolling.",image_id:25,first_seen:null}}},bttv:{emotes:{}}},p=new RegExp("\\b("+Object.keys(KappaJS.twitch.emotes).join("|")+")\\b","g")}function i(t){return new RegExp("\\b("+Object.keys(KappaJS.twitch.emotes).join("|")+")\\b","g")}function c(t){return new RegExp("\\b("+t.emotes.map(function(t){return t.code.replace(/([(\')])/g,"\\$1")}).join("|")+")\\b","g")}function s(t){var e={urlTemplate:t.urlTemplate,emotes:{}};return console.log(t),t.emotes.forEach(function(t){e.emotes[t.code]=t}),e}var p=/\\b(Kappa)\\b/g,l=/\\b(haHAA|LUL)\\b/g;e().then(function(t){window.KappaJS={},window.KappaJS.twitch=t[0],window.KappaJS.bttv=s(t[1]),p=i(t[0]),l=c(t[1])},o),console.log(p),t.fn.kappa=function(e){function n(t,e){var n=t.image_id;return['<img src="',KappaJS.twitch.template[s.emoteSize].replace("{image_id}",n),'" ',null===s.customClass?"":'class="'+s.customClass+'" ','alt="',e,'">'].join("")}function a(t){var e=t.id,n=t.code;return'<img src="https:'+KappaJS.bttv.urlTemplate.replace("{{id}}/{{image}}",e+'/1x"')+' alt="'+n+'">'}function o(){var t=setInterval(function(){"undefined"!=typeof window.KappaJS&&(i(),clearInterval(t))},500)}function i(){t(c).each(function(e,o){t(o).html(t(o).html().replace(p,function(t,e){return n(KappaJS.twitch.emotes[e],e)})),t(o).html(t(o).html().replace(l,function(t,e){return a(KappaJS.bttv.emotes[e],e)}))})}var c=this,s=t.extend({customClass:null,emoteSize:"small"},e);"undefined"==typeof window.KappaJS?o():i()}}(jQuery);