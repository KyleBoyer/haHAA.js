!function(e){e.fn.kappa=function(t){function o(e){s=JSON.parse(e),c=s.emotes,a=s.template.small,r=s.template.medium,l=s.template.large,i()}function n(){switch(u.emoteSize){case"small":return a;case"medium":return r;case"large":return l}}function i(){var t,o=n();e.each(c,function(n,i){t=i.image_id,currentEmoteUrl=o.replace("{image_id}",t),m.each(function(t,o){e(o).html(function(e,t){var o=new RegExp("\\b"+n+"\\b","g");this.innerHTML=t.replace(o,'<img src="'+currentEmoteUrl+'">')})})})}var s,c,a,r,l,m=e(this),u=e.extend({emoteSize:"small"},t);"undefined"==typeof Storage?null==sessionStorage.twitchemotesAPI?e.ajax({url:"http://twitchemotes.com/api_cache/v2/global.json",success:function(e){sessionStorage.twitchemotesAPI=JSON.stringify(e),o(sessionStorage.twitchemotesAPI)},error:function(){console.log("Connection to Twitch Emotes API v2 has failed.")}}):o(sessionStorage.twitchemotesAPI):e.ajax({url:"http://twitchemotes.com/api_cache/v2/global.json",success:function(e){e=JSON.stringify(e),o(e)},error:function(){console.log("Connection to Twitch Emotes API v2 has failed.")}})}}(jQuery);
