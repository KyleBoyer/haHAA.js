"use strict";!function(e){function t(){return"undefined"!=typeof Storage&&null!==n?!0:new Promise(a)}function a(t,a){e.get("https://twitchemotes.com/api_cache/v2/global.json",function(e){"undefined"!=typeof Storage&&localStorage.setItem("kappa-js",JSON.stringify(e)),t(e)})}var n=localStorage.getItem("kappa-js");null===n?t().then(function(e){window.KappaJS=e}):window.KappaJS=JSON.parse(localStorage.getItem("kappa-js"));var o=new RegExp("\\b("+Object.keys(KappaJS.emotes).join("|")+")\\b","g");e.fn.kappa=function(t){function a(e,t){var a=e.image_id;return['<img src="',KappaJS.template[l.emoteSize].replace("{image_id}",a),'" ',null===l.customClass?"":'class="'+l.customClass+'" ','alt="',t,'">'].join("")}function n(){var e=setInterval(function(){"undefined"!=typeof window.KappaJS&&(i(),clearInterval(e))},500)}function i(){e(p).each(function(t,n){e(n).html(e(n).html().replace(o,function(e,t){return a(KappaJS.emotes[t],t)}))})}var p=this,l=e.extend({customClass:null,emoteSize:"small"},t);"undefined"==typeof window.KappaJS?n():i()}}(jQuery);
